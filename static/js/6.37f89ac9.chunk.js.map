{"version":3,"sources":["pages/home/useNewsSearch.js","helpers/constants.js","components/colorTheme/index.js","components/InfiniteList/index.js","pages/home/home.js"],"names":["useNewsSearch","query","pageNumber","countryCode","languageCode","startDate","useState","loading","setLoading","error","setError","news","setNews","hasMore","setHasMore","useEffect","cancel","url","params","NEWS_KEY","process","console","log","trim","q","from","sortBy","page","apiKey","language","country","axios","method","cancelToken","CancelToken","c","then","res","prevNews","data","articles","length","catch","e","isCancel","categoryList","languageList","countryList","ColorTheme","setTheme","class","id","style","backgroundColor","onClick","InfiniteList","setPageNumber","observer","useRef","lastElementRef","useCallback","node","current","disconnect","IntersectionObserver","entries","isIntersecting","prevPageNumber","observe","RenderItemBody","item","className","src","urlToImage","alt","title","content","author","map","index","ref","window","open","Home","setQuery","theme","setCountryCode","setLanguageCode","Date","setStartDate","history","useHistory","renderDataDropDown","value","slice","type","onChange","target","placeholder","calendar","selected","date","inline","dateFormat","weather","push","toUpperCase"],"mappings":"gMAiEeA,EA9DO,SACpBC,EACAC,EACAC,EACAC,EACAC,GAEA,MAA8BC,oBAAS,GAAvC,mBAAOC,EAAP,KAAgBC,EAAhB,KACA,EAA0BF,oBAAS,GAAnC,mBAAOG,EAAP,KAAcC,EAAd,KACA,EAAwBJ,mBAAS,IAAjC,mBAAOK,EAAP,KAAaC,EAAb,KACA,EAA8BN,oBAAS,GAAvC,mBAAOO,EAAP,KAAgBC,EAAhB,KAkDA,OAjDAC,qBAAU,WACRH,EAAQ,MACP,CAACX,EAAOE,EAAaC,EAAcC,IAEtCU,qBAAU,WACR,IAGIC,EAAQC,EAAKC,EAHXC,EAAWC,mCAyCjB,OAxCAZ,GAAW,GACXE,GAAS,GAETW,QAAQC,IAAIrB,GACRA,EAAMsB,QACRN,EAAM,oCACNC,EAAS,CACPM,EAAGvB,EAAMsB,OACTE,KAAMpB,EACNqB,OAAQ,aACRC,KAAMzB,EACN0B,OAAQT,EACRU,SAAUzB,KAGZa,EAAM,uCACNC,EAAS,CAAEY,QAAS3B,EAAawB,KAAMzB,EAAY0B,OAAQT,IAG7DY,IAAM,CACJC,OAAQ,MACRf,IAAKA,EACLC,OAAQA,EAERe,YAAa,IAAIF,IAAMG,aAAY,SAACC,GAAD,OAAQnB,EAASmB,OAEnDC,MAAK,SAACC,GACLzB,GAAQ,SAAC0B,GACP,MAAM,GAAN,mBAAWA,GAAX,YAAwBD,EAAIE,KAAKC,cAEnC1B,EAAWuB,EAAIE,KAAKC,SAASC,OAAS,GACtCjC,GAAW,MAEZkC,OAAM,SAACC,GAEFZ,IAAMa,SAASD,KACnBjC,GAAS,GACTF,GAAW,OAGR,kBAAMQ,OACZ,CAACf,EAAOC,EAAYC,EAAaC,EAAcC,IAE3C,CAAEE,UAASE,QAAOE,OAAME,Y,yCC/DpBgC,G,MAAe,CAC1B,WACA,gBACA,UACA,SACA,UACA,SACA,eAGWC,EAAe,CAC1B,YACA,YACA,aACA,aACA,YACA,YACA,aACA,WACA,eACA,gBACA,aACA,mBACA,cAGWC,EAAc,CACzB,SACA,eACA,aACA,eACA,aACA,cACA,YACA,YACA,iBACA,WACA,cACA,UACA,aACA,aACA,WACA,YACA,QACA,YACA,eACA,aACA,eACA,aACA,YACA,WACA,WACA,WACA,WACA,eACA,YACA,aACA,YACA,cACA,aACA,iBACA,YACA,iBACA,iBACA,YACA,cACA,aACA,YACA,YACA,kBACA,YACA,eACA,cACA,cACA,cACA,YACA,YACA,aACA,SACA,cACA,mB,eC3CaC,EAlCI,SAAC,GAAD,IAAGC,EAAH,EAAGA,SAAH,OACjB,sBAAKC,MAAM,SAAX,UACE,qBACEC,GAAG,WACHC,MAAO,CAAEC,gBAAiB,WAC1BC,QAAS,kBAAML,EAAS,cAE1B,qBACEE,GAAG,WACHC,MAAO,CAAEC,gBAAiB,WAC1BC,QAAS,kBAAML,EAAS,cAE1B,qBACEE,GAAG,WACHC,MAAO,CAAEC,gBAAiB,WAC1BC,QAAS,kBAAML,EAAS,cAE1B,qBACEE,GAAG,WACHC,MAAO,CAAEC,gBAAiB,WAC1BC,QAAS,kBAAML,EAAS,cAE1B,qBACEE,GAAG,WACHC,MAAO,CAAEC,gBAAiB,WAC1BC,QAAS,kBAAML,EAAS,cAE1B,qBACEE,GAAG,WACHC,MAAO,CAAEC,gBAAiB,WAC1BC,QAAS,kBAAML,EAAS,kBCkCfM,G,OAhEM,SAAC,GAAsD,IAApD5C,EAAmD,EAAnDA,KAAMJ,EAA6C,EAA7CA,QAASE,EAAoC,EAApCA,MAAOI,EAA6B,EAA7BA,QAAS2C,EAAoB,EAApBA,cAC/CC,EAAWC,mBAGXC,EAAiBC,uBACrB,SAACC,GAEKtD,IAGAkD,EAASK,SAASL,EAASK,QAAQC,aAEvCN,EAASK,QAAU,IAAIE,sBAAqB,SAACC,GAEvCA,EAAQ,GAAGC,gBAAkBrD,GAC/B2C,GAAc,SAACW,GAAD,OAAoBA,EAAiB,QAKnDN,GAAMJ,EAASK,QAAQM,QAAQP,MAErC,CAACtD,EAASM,IAGNwD,EAAiB,SAAC,GAAD,IAAGC,EAAH,EAAGA,KAAH,OACrB,qCACE,qBAAKC,UAAU,YAAf,SACE,qBACEC,IACEF,EAAKG,WACDH,EAAKG,WACL,gGAENF,UAAU,QACVG,IAAI,WAGR,sBAAKH,UAAU,WAAf,UACE,qBAAKA,UAAU,YAAf,SAA4BD,EAAKK,QACjC,qBAAKJ,UAAU,OAAf,SAAuBD,EAAKM,UAC5B,qBAAKL,UAAU,SAAf,SAAyBD,EAAKO,QAAU,MAAQP,EAAKO,gBAI3D,OACE,sBAAKN,UAAU,WAAf,UACG5D,EAAKmE,KAAI,SAACR,EAAMS,GACf,OACE,qBACEC,IAAKrE,EAAK8B,SAAWsC,EAAQ,EAAIpB,EAAiB,KAElDY,UAAU,OACVjB,QAAS,kBAAM2B,OAAOC,KAAKZ,EAAKrD,IAAK,WAJvC,SAME,cAACoD,EAAD,CAAgBC,KAAMA,KAJjBA,EAAKK,UAQhB,8BAAMpE,GAAW,eACjB,8BAAME,IAAUF,GAAW,uBC0DlB4E,UA1GF,WACX,MAA0B7E,mBAAS,IAAnC,mBAAOL,EAAP,KAAcmF,EAAd,KACA,EAAoC9E,mBAAS,GAA7C,mBAAOJ,EAAP,KAAmBsD,EAAnB,KACA,EAA0BlD,mBAAS,SAAnC,mBAAO+E,EAAP,KAAcpC,EAAd,KACA,EAAsC3C,mBAAS,MAA/C,mBAAOH,EAAP,KAAoBmF,EAApB,KACA,EAAwChF,mBAAS,MAAjD,mBAAOF,EAAP,KAAqBmF,EAArB,KACA,EAAkCjF,mBAAS,IAAIkF,MAA/C,mBAAOnF,EAAP,KAAkBoF,EAAlB,KACA,EAA0CzF,EACxCC,EACAC,EACAC,EACAC,EACAC,GALMM,EAAR,EAAQA,KAAME,EAAd,EAAcA,QAASN,EAAvB,EAAuBA,QAASE,EAAhC,EAAgCA,MAO1BiF,EAAUC,cAShB,IAKMC,EAAqB,SAACtB,EAAMS,GAChC,OACE,oBAEEc,MAAOvB,EACPhB,QAAS,WACPrD,EAAMsB,OACFgE,EAAgBjB,EAAKwB,OAAO,IAC5BR,EAAehB,EAAKwB,OAAO,KANnC,SASE,4BAAIxB,KARCS,IAaX,OACE,sBAAKR,UAAU,WAAf,UACE,sBAAKA,UAAU,SAASnB,MAAO,CAAEC,gBAAiBgC,GAAlD,UACE,sBAAKd,UAAU,YAAf,UACE,cAAC,EAAD,CAAYtB,SAAUA,IACtB,sBAAKsB,UAAU,kBAAf,UACE,uBACEwB,KAAK,OACLF,MAAO5F,EACP+F,SApCZ,SAAsBrD,GACpByC,EAASzC,EAAEsD,OAAOJ,OAClBrC,EAAc,IAmCJ0C,YAAY,SACZ3B,UAAU,WAEZ,+BACE,+BACE,qBAAKC,IAAK2B,IAAU5B,UAAU,WAAWG,IAAI,aAC7C,qBAAKH,UAAU,aAAf,SACE,cAAC,IAAD,CACE6B,SAAU/F,EACV2F,SAAU,SAACK,GAAD,OAAUZ,EAAaY,IACjCC,QAAM,EACNC,WAAW,oBAIjB,+BACE,qBAAK/B,IAAK3C,IAAU0C,UAAU,WAAWG,IAAI,aAE7C,oBAAIH,UAAU,gBAAd,SACGtE,EAAMsB,OACHuB,EAAagC,IAAIc,GACjB7C,EAAY+B,IAAIc,cAK5B,qBACEpB,IAAKgC,IACLjC,UAAU,UACVjB,QA5DQ,WAChBoC,EAAQe,KAAK,aA4DL/B,IAAI,eAGR,qBAAKH,UAAU,YAAf,SACE,sBAAMA,UAAU,UAAhB,SACG1B,EAAaiC,KAAI,SAACR,GAAD,OAChB,sBAAMC,UAAU,eAAhB,SAAgCD,EAAKoC,0BAK7C,cAAC,EAAD,CACE/F,KAAMA,EACNE,QAASA,EACTN,QAASA,EACTE,MAAOA,EACP+C,cAAeA,S","file":"static/js/6.37f89ac9.chunk.js","sourcesContent":["import { useEffect, useState } from \"react\";\nimport axios from \"axios\";\n\nconst useNewsSearch = (\n  query,\n  pageNumber,\n  countryCode,\n  languageCode,\n  startDate\n) => {\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(false);\n  const [news, setNews] = useState([]);\n  const [hasMore, setHasMore] = useState(false);\n  useEffect(() => {\n    setNews([]);\n  }, [query, countryCode, languageCode, startDate]);\n\n  useEffect(() => {\n    const NEWS_KEY = process.env.REACT_APP_NEWS_API_KEY;\n    setLoading(true);\n    setError(false);\n    let cancel, url, params;\n    console.log(query);\n    if (query.trim()) {\n      url = \"https://newsapi.org/v2/everything\";\n      params = {\n        q: query.trim(),\n        from: startDate,\n        sortBy: \"popularity\",\n        page: pageNumber,\n        apiKey: NEWS_KEY,\n        language: languageCode,\n      };\n    } else {\n      url = \"https://newsapi.org/v2/top-headlines\";\n      params = { country: countryCode, page: pageNumber, apiKey: NEWS_KEY };\n    }\n\n    axios({\n      method: \"GET\",\n      url: url,\n      params: params,\n      /** feature from axios to cancel a request */\n      cancelToken: new axios.CancelToken((c) => (cancel = c)),\n    })\n      .then((res) => {\n        setNews((prevNews) => {\n          return [...prevNews, ...res.data.articles];\n        });\n        setHasMore(res.data.articles.length > 0);\n        setLoading(false);\n      })\n      .catch((e) => {\n        /** checking if the error is axios cancellation */\n        if (axios.isCancel(e)) return;\n        setError(true);\n        setLoading(false);\n      });\n    /** cancel the previous request if a new one is called immediately i.e. invoking useEffect again */\n    return () => cancel();\n  }, [query, pageNumber, countryCode, languageCode, startDate]);\n\n  return { loading, error, news, hasMore };\n};\nexport default useNewsSearch;\n","export const categoryList = [\r\n  \"Business\",\r\n  \"Entertainment\",\r\n  \"General\",\r\n  \"Health\",\r\n  \"Science\",\r\n  \"Sports\",\r\n  \"Technology\",\r\n];\r\n// Language Data\r\nexport const languageList = [\r\n  \"Arabic-ar\",\r\n  \"German-de\",\r\n  \"English-en\",\r\n  \"Spanish-es\",\r\n  \"French-fr\",\r\n  \"Hebrew-he\",\r\n  \"Italian-it\",\r\n  \"Dutch-nl\",\r\n  \"Norwegian-no\",\r\n  \"Portuguese-pt\",\r\n  \"Russian-ru\",\r\n  \"Northern Sami-se\",\r\n  \"Chinese-zh\",\r\n];\r\n// Language Data\r\nexport const countryList = [\r\n  \"UAE-ae\",\r\n  \"Argentina-ar\",\r\n  \"Austria-at\",\r\n  \"Australia-au\",\r\n  \"Belgium-be\",\r\n  \"Bulgaria-bg\",\r\n  \"Brazil-br\",\r\n  \"Canada-ca\",\r\n  \"Switzerland-ch\",\r\n  \"China-cn\",\r\n  \"Colombia-co\",\r\n  \"Cuba-cu\",\r\n  \"Czechia-cz\",\r\n  \"Germany-de\",\r\n  \"Egypt-eg\",\r\n  \"France-fr\",\r\n  \"UK-gb\",\r\n  \"Greece-gr\",\r\n  \"Hong Kong-hk\",\r\n  \"Hungary-hu\",\r\n  \"Indonesia-id\",\r\n  \"Ireland-ie\",\r\n  \"Israel-il\",\r\n  \"India-in\",\r\n  \"Italy-it\",\r\n  \"Japan-jp\",\r\n  \"Korea-kr\",\r\n  \"Lithuania-lt\",\r\n  \"Latvia-lv\",\r\n  \"Morocco-ma\",\r\n  \"Mexico-mx\",\r\n  \"Malaysia-my\",\r\n  \"Nigeria-ng\",\r\n  \"Netherlands-nl\",\r\n  \"Norway-no\",\r\n  \"New Zealand-nz\",\r\n  \"Philippines-ph\",\r\n  \"Poland-pl\",\r\n  \"Portugal-pt\",\r\n  \"Romania-ro\",\r\n  \"Serbia-rs\",\r\n  \"Russia-ru\",\r\n  \"Saudi Arabia-sa\",\r\n  \"Sweden-se\",\r\n  \"Singapore-sg\",\r\n  \"Slovenia-si\",\r\n  \"Slovakia-sk\",\r\n  \"Thailand-th\",\r\n  \"Turkey-tr\",\r\n  \"Taiwan-tw\",\r\n  \"Ukraine-ua\",\r\n  \"USA-us\",\r\n  \"Venezuelave\",\r\n  \"South Africa-za\",\r\n];\r\n","import React from \"react\";\r\nimport \"./styles.css\";\r\n\r\nconst ColorTheme = ({ setTheme }) => (\r\n  <div class=\"swatch\">\r\n    <div\r\n      id=\"switch-1\"\r\n      style={{ backgroundColor: \"#8ea4ff\" }}\r\n      onClick={() => setTheme(\"#8ea4ff\")}\r\n    ></div>\r\n    <div\r\n      id=\"switch-2\"\r\n      style={{ backgroundColor: \"#2099f3\" }}\r\n      onClick={() => setTheme(\"#2099f3\")}\r\n    ></div>\r\n    <div\r\n      id=\"switch-3\"\r\n      style={{ backgroundColor: \"#cc0000\" }}\r\n      onClick={() => setTheme(\"#cc0000\")}\r\n    ></div>\r\n    <div\r\n      id=\"switch-4\"\r\n      style={{ backgroundColor: \"#eb21d0\" }}\r\n      onClick={() => setTheme(\"#eb21d0\")}\r\n    ></div>\r\n    <div\r\n      id=\"switch-5\"\r\n      style={{ backgroundColor: \"#ffa500\" }}\r\n      onClick={() => setTheme(\"#ffa500\")}\r\n    ></div>\r\n    <div\r\n      id=\"switch-6\"\r\n      style={{ backgroundColor: \"#774bb1\" }}\r\n      onClick={() => setTheme(\"#774bb1\")}\r\n    ></div>\r\n  </div>\r\n);\r\nexport default ColorTheme;\r\n","import React, { useRef, useCallback } from \"react\";\r\nimport \"./styles.css\";\r\n\r\nconst InfiniteList = ({ news, loading, error, hasMore, setPageNumber }) => {\r\n  const observer = useRef();\r\n\r\n  //Infinite loading setup\r\n  const lastElementRef = useCallback(\r\n    (node) => {\r\n      /** stop if already loading */\r\n      if (loading) return;\r\n\r\n      /** after loading disconnect the observer from previous last element */\r\n      if (observer.current) observer.current.disconnect();\r\n\r\n      observer.current = new IntersectionObserver((entries) => {\r\n        /** condition to trigger when the last node becomes visible and set next page number to call api */\r\n        if (entries[0].isIntersecting && hasMore) {\r\n          setPageNumber((prevPageNumber) => prevPageNumber + 1);\r\n        }\r\n      });\r\n\r\n      /** connect to the new last element */\r\n      if (node) observer.current.observe(node);\r\n    },\r\n    [loading, hasMore]\r\n  );\r\n  //Dynamic rendering of List item\r\n  const RenderItemBody = ({ item }) => (\r\n    <>\r\n      <div className=\"cardRight\">\r\n        <img\r\n          src={\r\n            item.urlToImage\r\n              ? item.urlToImage\r\n              : \"https://cdn3.vectorstock.com/i/1000x1000/35/52/placeholder-rgb-color-icon-vector-32173552.jpg\"\r\n          }\r\n          className=\"image\"\r\n          alt=\"Logo\"\r\n        />\r\n      </div>\r\n      <div className=\"cardLeft\">\r\n        <div className=\"cardTitle\">{item.title}</div>\r\n        <div className=\"desc\">{item.content}</div>\r\n        <div className=\"desc-i\">{item.author && \"-- \" + item.author}</div>\r\n      </div>\r\n    </>\r\n  );\r\n  return (\r\n    <div className=\"ListBody\">\r\n      {news.map((item, index) => {\r\n        return (\r\n          <div\r\n            ref={news.length === index + 1 ? lastElementRef : null} //when this element is created i.e. as the last element. It invokes callback which it is assigned to, with the element as param.\r\n            key={item.title}\r\n            className=\"post\"\r\n            onClick={() => window.open(item.url, \"_blank\")}\r\n          >\r\n            <RenderItemBody item={item} />\r\n          </div>\r\n        );\r\n      })}\r\n      <div>{loading && \"Loading...\"}</div>\r\n      <div>{error && !loading && \"Network Error\"}</div>\r\n    </div>\r\n  );\r\n};\r\nexport default InfiniteList;\r\n","import React, { useState } from \"react\";\nimport useNewsSearch from \"./useNewsSearch\";\nimport { useHistory } from \"react-router\";\nimport DatePicker from \"react-datepicker\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport { weather, language, calendar } from \"../../assests/images\";\nimport \"./styles.css\";\nimport {\n  countryList,\n  languageList,\n  categoryList,\n} from \"../../helpers/constants\";\nimport ColorTheme from \"../../components/colorTheme\";\nimport InfiniteList from \"../../components/InfiniteList\";\n\nconst Home = () => {\n  const [query, setQuery] = useState(\"\");\n  const [pageNumber, setPageNumber] = useState(1);\n  const [theme, setTheme] = useState(\"white\");\n  const [countryCode, setCountryCode] = useState(\"in\");\n  const [languageCode, setLanguageCode] = useState(\"en\");\n  const [startDate, setStartDate] = useState(new Date());\n  const { news, hasMore, loading, error } = useNewsSearch(\n    query,\n    pageNumber,\n    countryCode,\n    languageCode,\n    startDate\n  );\n  const history = useHistory();\n\n  //Search Function\n  function handleSearch(e) {\n    setQuery(e.target.value);\n    setPageNumber(1);\n  }\n\n  //Navigation to weather page\n  const toWeather = () => {\n    history.push(\"/weather\");\n  };\n\n  //Language Dropdown item\n  const renderDataDropDown = (item, index) => {\n    return (\n      <li\n        key={index}\n        value={item}\n        onClick={() => {\n          query.trim()\n            ? setLanguageCode(item.slice(-2))\n            : setCountryCode(item.slice(-2));\n        }}\n      >\n        <a>{item}</a>\n      </li>\n    );\n  };\n\n  return (\n    <div className=\"homebody\">\n      <div className=\"header\" style={{ backgroundColor: theme }}>\n        <div className=\"searchBar\">\n          <ColorTheme setTheme={setTheme} />\n          <div className=\"input-container\">\n            <input\n              type=\"text\"\n              value={query}\n              onChange={handleSearch}\n              placeholder=\"Search\"\n              className=\"search\"\n            ></input>\n            <ul>\n              <li>\n                <img src={calendar} className=\"calendar\" alt=\"calendar\" />\n                <div className=\"datePicker\">\n                  <DatePicker\n                    selected={startDate}\n                    onChange={(date) => setStartDate(date)}\n                    inline\n                    dateFormat=\"yyyy-MM-dd\"\n                  />\n                </div>\n              </li>\n              <li>\n                <img src={language} className=\"language\" alt=\"language\" />\n\n                <ul className=\"dropdown-menu\">\n                  {query.trim()\n                    ? languageList.map(renderDataDropDown)\n                    : countryList.map(renderDataDropDown)}\n                </ul>\n              </li>\n            </ul>\n          </div>\n          <img\n            src={weather}\n            className=\"weather\"\n            onClick={toWeather}\n            alt=\"weather\"\n          />\n        </div>\n        <div className=\"navHeader\">\n          <span className=\"scrollH\">\n            {categoryList.map((item) => (\n              <span className=\"categoryItem\">{item.toUpperCase()}</span>\n            ))}\n          </span>\n        </div>\n      </div>\n      <InfiniteList\n        news={news}\n        hasMore={hasMore}\n        loading={loading}\n        error={error}\n        setPageNumber={setPageNumber}\n      />\n    </div>\n  );\n};\n\nexport default Home;\n"],"sourceRoot":""}